<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MVL Interactive SOP Manual</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Stone, Slate, Teal) -->
    <!-- Application Structure Plan: A single-page application with a fixed header navigation for the 8 primary policy categories, plus introduction and glossary. The main content area dynamically renders selected content. A dashboard-style intro page uses a chart for visual navigation. Individual policy pages use a two-column layout with sub-navigation on the left and detailed content (using accordions and interactive diagrams) on the right. This structure was chosen to break down dense information into manageable, explorable chunks, prioritizing user navigation and comprehension over a linear document format. -->
    <!-- Visualization & Content Choices: Report Info: 8 main policy categories -> Goal: Compare & Navigate -> Viz: Bar Chart (Chart.js) -> Interaction: Click on a bar to navigate to that category -> Justification: Provides a high-level overview of the manual's structure and an engaging entry point. Report Info: Policy details (purpose, scope, statements) -> Goal: Inform & Organize -> Viz: Accordions (HTML/JS) -> Interaction: Click to expand/collapse -> Justification: Manages information density and prevents walls of text. Report Info: Process Flows (e.g., Incident Response) -> Goal: Explain Process -> Viz: Custom HTML/CSS Diagrams -> Interaction: Hover to highlight steps -> Justification: Replaces static diagrams with interactive, accessible HTML elements, adhering to NO SVG/Mermaid constraint. Report Info: Compliance Controls -> Goal: Relate & Inform -> Viz: Clickable Tags -> Interaction: Click to show details in a modal -> Justification: Connects policies to compliance without cluttering the main content. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 50vh;
        }
        .flowchart {
            position: relative;
            padding: 2rem 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        .flowchart-node, .flowchart-decision, .flowchart-io {
            padding: 0.75rem 1.5rem;
            border: 1px solid #e2e8f0; /* slate-200 */
            border-radius: 0.5rem;
            background-color: white;
            text-align: center;
            min-width: 220px;
            max-width: 280px;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            transition: all 0.2s ease-in-out;
        }
        .flowchart-node:hover, .flowchart-decision:hover, .flowchart-io:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border-color: #0d9488; /* teal-600 */
        }
        .flowchart-decision {
            transform: rotate(45deg);
            width: 150px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .flowchart-decision span {
            transform: rotate(-45deg);
            display: inline-block;
            width: 120%;
        }
        .flowchart-arrow {
            width: 1px;
            background-color: #94a3b8; /* slate-400 */
            height: 1.5rem;
            position: relative;
        }
        .flowchart-arrow::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #94a3b8; /* slate-400 */
        }
        .active-nav {
            background-color: #ccfbf1; /* teal-100 */
            color: #0d9488; /* teal-600 */
            font-weight: 600;
        }
        .prose-custom {
            max-width: none;
        }
        .prose-custom ul {
            list-style-type: disc;
            padding-left: 1.5rem;
        }
        .prose-custom li {
            margin-top: 0.5rem;
        }
        .prose-custom .policy-section {
            margin-top: 1.5rem;
        }
        .prose-custom .policy-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b; /* slate-800 */
            margin-bottom: 0.75rem;
            padding-bottom: 0.25rem;
            border-bottom: 2px solid #94a3b8; /* slate-400 */
        }

        /* Logo Styles */
        .header-logo-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .header-color-bars {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .header-bar {
            width: 14px;
            height: 7px;
            border-radius: 1px;
        }
        .bar-1 { background-color: #9b9b9b; }
        .bar-2 { background-color: #ba2226; }
        .bar-3 { background-color: #8c2a8e; }
        .bar-4 { background-color: #92b13f; }
        .bar-5 { background-color: #e57e33; }
        .header-logo-text {
            font-size: 32px;
            font-weight: 900;
            line-height: 1;
            background: linear-gradient(to right, #bdbdbd, #616161);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            letter-spacing: -1.5px;
        }
    </style>
</head>
<body class="antialiased text-slate-800">

    <div id="app" class="min-h-screen flex flex-col">
        <header class="bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50">
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-3">
                        <div class="header-logo-container">
                            <div class="header-color-bars">
                                <div class="header-bar bar-1"></div>
                                <div class="header-bar bar-2"></div>
                                <div class="header-bar bar-3"></div>
                                <div class="header-bar bar-4"></div>
                                <div class="header-bar bar-5"></div>
                            </div>
                            <div class="header-logo-text">MVL</div>
                        </div>
                        <h1 class="text-xl font-bold text-slate-800 hidden sm:block">Interactive SOP Manual</h1>
                    </div>
                    <div class="hidden md:flex items-center space-x-1">
                        <a href="#" class="main-nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-700 hover:bg-slate-100" data-content="intro">Introduction</a>
                        <div class="relative group">
                            <button class="px-3 py-2 rounded-md text-sm font-medium text-slate-700 hover:bg-slate-100 inline-flex items-center">
                                <span>Policy Categories</span>
                                <svg class="ml-2 -mr-1 h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                                </svg>
                            </button>
                            <div class="absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                                <div class="py-1" role="menu" aria-orientation="vertical">
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat1">1. Cybersecurity Controls</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat2">2. Acceptable Use</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat3">3. Remote Access & BYOD</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat4">4. Identity & Access Mgmt</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat5">5. IT Operations Lifecycle</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat6">6. Backup & Recovery</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat7">7. Monitoring & Enforcement</a>
                                    <a href="#" class="main-nav-link block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100" role="menuitem" data-content="cat8">8. Procurement & Vendor</a>
                                </div>
                            </div>
                        </div>
                        <a href="#" class="main-nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-700 hover:bg-slate-100" data-content="glossary">Glossary</a>
                    </div>
                     <div class="md:hidden">
                        <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-slate-400 hover:text-slate-500 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-teal-500">
                            <span class="sr-only">Open main menu</span>
                            <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                </div>
                 <div class="md:hidden hidden" id="mobile-menu">
                    <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="intro">Introduction</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat1">1. Cybersecurity</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat2">2. Acceptable Use</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat3">3. Remote Access</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat4">4. IAM</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat5">5. IT Operations</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat6">6. Backup/Recovery</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat7">7. Monitoring</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="cat8">8. Procurement</a>
                        <a href="#" class="main-nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-700 hover:bg-slate-100" data-content="glossary">Glossary</a>
                    </div>
                </div>
            </nav>
        </header>

        <main id="main-content" class="flex-grow">
            <!-- Dynamic content will be injected here -->
        </main>

        <footer class="bg-white border-t border-slate-200">
            <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm text-slate-500">
                &copy; 2025 MVL | Standard Operating Procedure Manual v1.0 | Effective Date: 2025-06-09
            </div>
        </footer>
    </div>

    <!-- Modal for Compliance Controls -->
    <div id="compliance-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start">
                    <h3 id="modal-title" class="text-xl font-semibold text-slate-800">Compliance Control</h3>
                    <button id="modal-close" class="text-slate-400 hover:text-slate-600">
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div id="modal-body" class="mt-4 text-slate-600 prose prose-custom">
                    <!-- Modal content will be injected here -->
                </div>
            </div>
        </div>
    </div>


    <script>
        const sopData = {
            intro: {
                title: "Welcome to the MVL Interactive SOP Manual",
                overview: `
                    <p class="text-lg text-slate-600 mb-6">This interactive application transforms MVL's Standard Operating Procedure (SOP) Manual into a dynamic, user-friendly resource. It establishes the official policies, procedures, and guidelines governing the use, management, and security of MVL's information technology (IT) resources.</p>
                    <p class="text-slate-600 mb-6">Its purpose is to ensure operational integrity, protect corporate and client data, maintain compliance, and guide employees in the responsible use of technology. We have prioritized concise information and visual flowcharts to make policies easy to understand. Unfamiliar with a term? Visit our comprehensive <strong>Glossary</strong> from the main menu.</p>
                    <h3 class="text-xl font-semibold text-slate-800 mb-4">Navigating the Manual</h3>
                    <p class="text-slate-600 mb-6">Use the navigation bar above to explore the 8 main policy categories, or click on a bar in the chart below to jump directly to a category. Each section provides detailed policies and interactive diagrams to help you quickly find the information you need.</p>
                    <div class="chart-container">
                        <canvas id="sopChart"></canvas>
                    </div>
                `
            },
            glossary: {
                title: "Consolidated Glossary of Terms",
                overview: `<p class="text-slate-600 mb-6">This glossary provides definitions for key terms and acronyms used throughout the SOP manual to ensure a common understanding.</p>`,
                terms: [
                    { term: "Asset", def: "Any MVL-owned hardware, software, system, service, or information." },
                    { term: "BYOD", def: "Bring Your Own Device: The practice of using a personally owned device to access company information and systems." },
                    { term: "CMMC", def: "Cybersecurity Maturity Model Certification: A framework required by the U.S. Department of Defense to ensure its contractors have adequate cybersecurity controls." },
                    { term: "CUI", def: "Controlled Unclassified Information: Information that requires safeguarding or dissemination controls pursuant to and consistent with applicable law, regulations, and government-wide policies." },
                    { term: "Incident", def: "An event that actually or potentially jeopardizes the confidentiality, integrity, or availability of an information system or the information the system processes, stores, or transmits." },
                    { term: "ITSM", def: "IT Service Management: The activities performed by an organization to design, build, deliver, operate, and control IT services offered to customers." },
                    { term: "Least Privilege", def: "The principle of restricting access rights for users to the minimum permissions they need to perform their work." },
                    { term: "MFA", def: "Multi-Factor Authentication: A security process that requires more than one method of authentication to verify a user's identity." },
                    { term: "NIST", def: "National Institute of Standards and Technology: A U.S. federal agency that develops cybersecurity standards." },
                    { term: "PAM", def: "Privileged Access Management: Tools and practices for controlling and monitoring access for privileged users." },
                    { term: "RBAC", def: "Role-Based Access Control: A method of restricting system access based on user roles." },
                    { term: "TATs", def: "Turnaround Times: The expected duration required to complete a task, request, or process. TATs help set service expectations and measure operational efficiency." },
                    { term: "ZTA", def: "Zero Trust Architecture: A security model that requires strict identity verification for every person and device attempting to access resources on a network." },
                ]
            },
            cat1: {
                title: "Cybersecurity Controls",
                overview: `This category outlines the foundational protective measures to defend MVL systems, data, and users against cyber threats, aligned with a Zero Trust Architecture (ZTA).`,
                policies: [
                    {
                        id: "1-1",
                        title: "Cybersecurity Policy",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To establish a security-first culture and a Zero Trust model to protect MVL's information assets from all threats.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Security Team:</strong> Oversees daily security operations, applies patches, monitors for threats, and leads incident response.</li>
                                    <li><strong>Department Managers:</strong> Ensure their teams are trained and follow all security protocols.</li>
                                    <li><strong>Employees:</strong> Maintain secure practices, use strong passwords, and report suspicious activity.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Critical Patches:</strong> Deployed within 48 hours.</li>
                                    <li><strong>Incidents:</strong> Immediately escalated to the IT Security Team.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-node"><span>Assess Risks & Vulnerabilities</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Implement Protective Controls (e.g., ZTA, MFA)</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Continuously Detect & Monitor Threats</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Respond to & Contain Incidents</span></div>
                                     <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Recover & Improve</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "RA.L2-3.11.1", title: "CMMC RA.L2-3.11.1", desc: "Periodically assess the risk to organizational operations, assets, and individuals." }]
                    },
                    {
                        id: "1-2",
                        title: "Data Protection & Classification",
                        content: `
                             <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To ensure all MVL data, especially Controlled Unclassified Information (CUI), is properly classified, handled, and protected.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Department:</strong> Implements technical controls like encryption and role-based access.</li>
                                    <li><strong>Data Owners:</strong> Classify and manage data; IT ensures retention and disposal policies are followed.</li>
                                    <li><strong>Employees:</strong> Adhere to handling protocols for all sensitive information.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Data Classification Updates:</strong> 2-3 business days.</li>
                                    <li><strong>Access Control Adjustments:</strong> Within 1 business day.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Identify or Create Data</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Is it Sensitive or CUI?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Classify, Mark & Encrypt Data</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Store in Secure, Access-Controlled Location</span></div>
                                     <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Monitor Access & Usage</span></div>
                                </div>
                            </div>
                        `,
                         compliance: [{ id: "AC.L2-3.1.22", title: "CMMC AC.L2-3.1.22", desc: "Control CUI in accordance with authorized use." }]
                    },
                    {
                        id: "1-3",
                        title: "Incident Response",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To ensure a swift, effective, and coordinated response to any security incident, minimizing impact and restoring normal operations.</p>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>All Employees:</strong> Must immediately report suspected incidents to the IT Help Desk.</li>
                                    <li><strong>IT Security Team:</strong> Leads the Incident Response Team (IRT) to manage containment, eradication, and recovery.</li>
                                    <li><strong>Executive Management:</strong> Notified of serious incidents and approves external communications.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Initial Breach Response:</strong> Within 2 business days.</li>
                                    <li><strong>Investigation Closure:</strong> Within 7-10 business days.</li>
                                    <li><strong>Critical Alerts:</strong> Immediate response from IT Security.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Suspected Incident Identified</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Report to IT Help Desk</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Is it a Security Incident?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Activate Incident Response Team (IRT)</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Contain, Eradicate & Recover</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Post-Incident Analysis & Report</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "IR.L2-3.6.1", title: "CMMC IR.L2-3.6.1", desc: "Establish an operational incident-handling capability." }]
                    }
                ]
            },
            cat2: { 
                title: "Acceptable Use of IT Resources", 
                overview: "This category defines the standards for appropriate, ethical, and secure use of MVL’s IT assets.", 
                policies: [
                    { 
                        id: "2-1", 
                        title: "Acceptable Use (AUP)", 
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To define employee responsibilities for the appropriate use of MVL's IT resources.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Employees:</strong> Use systems for business purposes and avoid prohibited activities.</li>
                                    <li><strong>IT Department:</strong> Enforces rules through system monitoring and investigates violations.</li>
                                    <li><strong>Department Managers:</strong> Reinforce compliance and escalate violations to IT and HR.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Violation Review:</strong> Immediate escalation.</li>
                                    <li><strong>Policy/Website Exception Request:</strong> Reviewed within 2 business days.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Employee intends to use an IT resource</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Is the use for a business purpose?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Proceed with Use</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Does it violate any policy? (e.g., illegal, harassment)</span></div>
                                    <div class="flowchart-arrow"></div>
                                     <div class="flowchart-io"><span>Action is either Acceptable or a Violation</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AT.L2-3.2.1", title: "CMMC AT.L2-3.2.1", desc: "Ensure users are aware of security risks and policies." }]
                    },
                    {
                        id: "2-2",
                        title: "Social Media & External Tools",
                        content: `
                           <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To govern the use of social media and external web tools to mitigate security and reputational risks.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Employees:</strong> Must not share MVL-related content or use unapproved external tools for work.</li>
                                    <li><strong>IT Department:</strong> Blocks or restricts access to unauthorized platforms.</li>
                                    <li><strong>Compliance & Communications:</strong> Review requests for public-facing content or new tools.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>New SaaS Tool Approval:</strong> Reviewed within 3-5 business days.</li>
                                    <li><strong>Work-Related Social Media Content Review:</strong> 2 business days.</li>
                                    <li><strong>Misuse/Breach Investigation:</strong> Immediate escalation.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Want to use external tool or post on social media?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Does it involve MVL data or representation?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Consult Policy & Seek Approval from IT/Compliance</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Proceed only if approved and compliant</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "CM.L2-3.4.8", title: "CMMC CM.L2-3.4.8", desc: "Prohibit the installation of unauthorized software." }]
                    }
                ] 
            },
            cat3: { 
                title: "Remote Access & BYOD", 
                overview: "This category outlines policies for securely working from outside MVL premises or using personal devices.", 
                policies: [
                    { 
                        id: "3-1", 
                        title: "Remote Access", 
                        content: `
                           <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To define security requirements for connecting to MVL's network from any remote location.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Employees:</strong> Request remote access and ensure devices meet security standards.</li>
                                    <li><strong>IT Department:</strong> Configures secure access (VPN), monitors activity, and enforces device compliance.</li>
                                    <li><strong>Managers:</strong> Approve remote work eligibility and confirm access needs.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>New Remote Access Setup:</strong> 1-2 business days.</li>
                                    <li><strong>Access Revocation:</strong> Immediate upon risk or departure.</li>
                                    <li><strong>Device Compliance Remediation:</strong> Within 2 business days.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Employee Requests Remote Access</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Manager Approves Business Need</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>IT Configures Secure VPN Access</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Secure Connection Established & Monitored</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AC.L2-3.1.12", title: "CMMC AC.L2-3.1.12", desc: "Monitor and control remote access sessions." }]
                    },
                    {
                        id: "3-2",
                        title: "Bring Your Own Device (BYOD)",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To define requirements for using personal devices to access MVL data and systems.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Employees:</strong> Obtain approval and ensure their personal devices meet security standards (encryption, passwords, etc.).</li>
                                    <li><strong>IT Department:</strong> Reviews device compliance and installs required security configurations (e.g., MDM).</li>
                                    <li><strong>Managers:</strong> Validate business necessity and approve usage requests.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>BYOD Approval Process:</strong> 3-5 business days.</li>
                                    <li><strong>Device Deactivation (upon exit):</strong> Within 1 business day.</li>
                                    <li><strong>Lost/Stolen Device Response:</strong> Immediate.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Employee requests BYOD use via form</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>IT Security Review: Meets Requirements?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>IT installs security software on device</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Access Granted & Device Registered</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AC.L2-3.1.17", title: "CMMC AC.L2-3.1.17", desc: "Protect CUI on mobile devices." }]
                    }
                ]
            },
            cat4: { 
                title: "Identity & Access Management (IAM)", 
                overview: "This category defines how user identities are managed, access is granted, and privileged accounts are controlled.", 
                policies: [
                    {
                        id: "4-1",
                        title: "User Access Lifecycle",
                        content: `
                             <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To ensure timely and appropriate management of user access throughout their employment lifecycle (Joiner, Mover, Leaver).</p>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>HR:</strong> Coordinates start dates, role changes, and departures, initiating requests to IT.</li>
                                    <li><strong>IT Department:</strong> Creates, modifies, or disables user accounts and access based on requests.</li>
                                    <li><strong>Managers:</strong> Confirm the systems and access levels needed for their team members.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>New Hire Account Setup:</strong> 1-2 business days before start date.</li>
                                    <li><strong>Role Change (Mover) Access Update:</strong> Within 2 business days of notification.</li>
                                    <li><strong>Departure Account Deactivation:</strong> Same day as departure.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>HR Initiates Action (Hire, Move, Terminate)</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Manager Submits/Approves Access Request</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>IT Provisions, Modifies, or Revokes Access</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Access Status Updated & Verified</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AC.L2-3.1.2", title: "CMMC AC.L2-3.1.2", desc: "Control internal system access (creation, modification, disabling, and removal)." }]
                    },
                    {
                        id: "4-2",
                        title: "Privileged & Shared Accounts",
                        content: `
                             <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To strictly control, monitor, and audit the use of all privileged (e.g., administrator) and shared accounts.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Department:</strong> Manages privileged accounts, maintains audit logs, and restricts access.</li>
                                    <li><strong>Privileged Users:</strong> Must use a separate admin account and follow dual-authentication protocols.</li>
                                    <li><strong>Compliance:</strong> Reviews privileged access logs during audits.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Privileged Account Creation:</strong> 2-3 business days.</li>
                                    <li><strong>Privileged Access Audit Review:</strong> Monthly.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Need for Privileged Access Identified</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Is access justified and approved by Manager & IT?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Use dedicated admin account with MFA</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>All actions are logged and audited</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AC.L2-3.1.5", title: "CMMC AC.L2-3.1.5", desc: "Employ the principle of least privilege." }]
                    },
                    {
                        id: "4-3",
                        title: "Access Review",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To periodically review user access rights to ensure they remain appropriate and necessary.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Department:</strong> Conducts quarterly reviews of active accounts and flags dormant users.</li>
                                    <li><strong>Department Managers:</strong> Validate and certify access rights for all team members during reviews.</li>
                                    <li><strong>Compliance:</strong> Audits the account recertification records.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Quarterly Access Certification:</strong> Completed within 10 business days.</li>
                                    <li><strong>Dormant Account Deactivation:</strong> Automatic after 30 days of inactivity.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Quarterly Access Review Cycle Begins</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>IT generates access reports for each department</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Managers review and certify team access</span></div>
                                     <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Is any access excessive or unnecessary?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>IT revokes unneeded access & closes review</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AC.L2-3.1.4", title: "CMMC AC.L2-3.1.4", desc: "Periodically review and update access permissions." }]
                    }
                ] 
            },
            cat5: { 
                title: "IT Operations Lifecycle", 
                overview: "This category covers the day-to-day management of IT systems, user support, and infrastructure to ensure reliability and security.", 
                policies: [
                    {
                        id: "5-1",
                        title: "IT Services & Support",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To detail how users request assistance, receive help, and escalate unresolved technical issues.</p>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>End Users:</strong> Submit requests via the designated help desk platform (ITSM).</li>
                                    <li><strong>IT Support Technicians:</strong> Triage tickets, provide support, and escalate complex issues.</li>
                                    <li><strong>IT Manager:</strong> Oversees workload, service level compliance, and support quality.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Priority 1 (Critical Outage):</strong> Immediate response.</li>
                                    <li><strong>Priority 2 (Major Disruption):</strong> Resolved within 2-3 business days.</li>
                                    <li><strong>Priority 3 (General Help):</strong> Resolved within 3-5 business days.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>User Experiences Issue / Has Request</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Submit Ticket via ITSM Portal</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>IT Triage: Determine Priority</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Assign to Technician & Resolve</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>User Confirms Resolution & Ticket is Closed</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "IR.L2-3.6.1", title: "CMMC IR.L2-3.6.1", desc: "Establish an operational incident-handling capability." }]
                    },
                     {
                        id: "5-2",
                        title: "IT Change Management",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To control how MVL applies updates, patches, and system modifications to minimize disruption and ensure accountability.</p>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Department:</strong> Logs, evaluates, tests, and schedules changes.</li>
                                    <li><strong>Requesting Departments:</strong> Submit change requests with business justification.</li>
                                    <li><strong>Executive Management:</strong> Reviews impact, risk, and downtime for major changes before approval.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Standard Change Review:</strong> Within 3-5 business days.</li>
                                    <li><strong>Emergency Change:</strong> Implemented immediately with post-event documentation.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Change Request Submitted via ITSM</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Change Advisory Board (CAB) Review</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Risk Assessment & Planning Approved?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Implement & Test Change</span></div>
                                     <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Document & Close Change Request</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "CM.L2-3.4.2", title: "CMMC CM.L2-3.4.2", desc: "Track, review, approve/disapprove, and log changes." }]
                    }
                ] 
            },
            cat6: { 
                title: "Backup, Recovery & Disaster Response", 
                overview: "This category ensures the continuity of business operations and the restoration of data and systems in an emergency.", 
                policies: [
                    {
                        id: "6-1",
                        title: "Data Backup",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To ensure that critical MVL data is regularly backed up, secured, and can be restored in a timely manner.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Backup Administrators (IT):</strong> Schedule backups, verify completion, and manage storage solutions.</li>
                                    <li><strong>Data Owners:</strong> Confirm critical business data is included in backup scope.</li>
                                    <li><strong>Compliance:</strong> Reviews retention rules and encryption methods for adherence.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Daily Backups:</strong> Completed nightly by 2:00 a.m.</li>
                                    <li><strong>User-Level File Recovery:</strong> 1-2 business days.</li>
                                    <li><strong>Recovery Point Objective (RPO):</strong> Maximum 24 hours of data loss.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Automated Daily & Weekly Backup Jobs Run</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Data is Encrypted and Stored On-site & Off-site</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Backup Verification Successful?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Quarterly Restoration Test Performed</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Test Results Documented</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "RE.L2-3.10.3", title: "CMMC RE.L2-3.10.3", desc: "Regularly perform and test data back-ups." }]
                    },
                    {
                        id: "6-2",
                        title: "Disaster Recovery (DR) & Business Continuity (BCP)",
                        content: `
                             <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To provide a plan for restoring IT systems (DR) and continuing essential business functions (BCP) during and after a major disruption.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT DR Team:</strong> Activates recovery plan, restores critical infrastructure, and verifies data integrity.</li>
                                    <li><strong>Business Continuity Team:</strong> Maintains process maps, contact lists, and contingency workarounds.</li>
                                    <li><strong>All Departments:</strong> Designate critical functions and participate in annual tests.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Recovery Time Objective (RTO) - Priority 1:</strong> 8 hours.</li>
                                    <li><strong>Recovery Time Objective (RTO) - Priority 2:</strong> 24-48 hours.</li>
                                    <li><strong>Crisis Communication Rollout:</strong> Within 2 hours of declaration.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Disruption Occurs (e.g., Outage, Cyberattack)</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Activate DR/BCP Plans</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flex flex-col md:flex-row gap-4">
                                        <div class="flowchart-node"><strong>Business Continuity Plan (BCP)</strong><br/><small>Focus: Keep Business Running with workarounds</small></div>
                                        <div class="flowchart-node"><strong>Disaster Recovery Plan (DR)</strong><br/><small>Focus: Restore IT Systems from backups</small></div>
                                    </div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Return to Normal Operations</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "IR.L2-3.6.2", title: "CMMC IR.L2-3.6.2", desc: "Track, document, and report incidents, including testing response capabilities." }]
                    }
                ] 
            },
            cat7: { 
                title: "Monitoring, Compliance & Enforcement", 
                overview: "This category focuses on the oversight, auditing, and enforcement of all IT policies to ensure adherence and mitigate risk.", 
                policies: [
                    {
                        id: "7-1",
                        title: "System Monitoring & Auditing",
                        content: `
                           <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To track and analyze user activity, system performance, and security events to detect anomalies, misuse, or breaches.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Security Team:</strong> Maintains audit logs, monitors privileged accounts, and investigates automated alerts from the SIEM.</li>
                                    <li><strong>Compliance Team:</strong> Conducts quarterly log reviews and investigates suspicious events independently.</li>
                                    <li><strong>Third-Party Auditors:</strong> Review logs during formal compliance assessments.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Log Review Frequency:</strong> Weekly (IT), Quarterly (Compliance).</li>
                                    <li><strong>Critical Incident Alert Response:</strong> Immediate.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>System & User Activity Occurs</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Logs are Generated and Sent to SIEM</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-decision"><span>Automated Alert Triggered?</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>IT Security Investigates Immediately</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Quarterly Compliance Review of All Logs</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "AU.L2-3.3.1", title: "CMMC AU.L2-3.3.1", desc: "Create and retain individual audit records of system access and activity." }]
                    },
                    {
                        id: "7-2",
                        title: "Policy Enforcement & Escalation",
                        content: `
                            <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To define the consequences for violating IT policies and the process for escalation.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Supervisors:</strong> Report suspected noncompliance or unsafe behavior from their team members.</li>
                                    <li><strong>HR & Compliance:</strong> Lead internal investigations and enforce disciplinary steps.</li>
                                    <li><strong>Legal:</strong> Reviews serious breaches that may involve contracts or external obligations.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Initial Breach Response:</strong> Within 2 business days.</li>
                                    <li><strong>Investigation Closure:</strong> Within 7-10 business days.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                             <div class="flowchart">
                                <div class="flowchart-io"><span>Policy Violation Detected/Reported</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-node"><span>Initial Investigation by Manager/IT</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-decision"><span>Severity Assessed (Minor, Moderate, or Severe)</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-node"><span>Progressive Disciplinary Action with HR</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-io"><span>Case Documented & Closed</span></div>
                            </div>
                        `,
                        compliance: [{ id: "AT.L2-3.2.1", title: "CMMC AT.L2-3.2.1", desc: "Ensure users are aware of policies and the consequences of non-compliance." }]
                    }
                ] 
            },
            cat8: { 
                title: "Procurement & Vendor Governance", 
                overview: "This category establishes the framework for securely acquiring IT assets and managing third-party vendor risk.", 
                policies: [
                    {
                        id: "8-1",
                        title: "Procurement & Vendor Approval",
                        content: `
                           <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To ensure all IT-related procurements and third-party vendors are approved, secure, and provide value to MVL.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>Department Heads:</strong> Initiate purchase requests based on operational needs.</li>
                                    <li><strong>IT & Procurement:</strong> Validate technical specs, check compatibility, and assess vendor risk.</li>
                                    <li><strong>Finance & Executive Management:</strong> Approve purchases over pre-set thresholds.</li>
                                    <li><strong>Legal & Compliance:</strong> Review contracts and vet vendors handling sensitive data.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Standard Asset Procurement:</strong> 3-7 business days.</li>
                                    <li><strong>New Tool/Vendor Vetting & Approval:</strong> 5-10 business days.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                             <div class="flowchart">
                                <div class="flowchart-io"><span>Employee/Manager Submits Purchase Requisition</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-decision"><span>Is this a new Vendor or SaaS tool?</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-node"><span>IT Security & Legal Vetting</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-node"><span>Procurement & Finance Review</span></div>
                                <div class="flowchart-arrow"></div>
                                <div class="flowchart-io"><span>Approved & Purchased</span></div>
                            </div>
                        `,
                        compliance: [{ id: "SA.L2-3.12.3", title: "CMMC SA.L2-3.12.3", desc: "Manage the security of systems and services that are outsourced." }]
                    },
                    {
                        id: "8-2",
                        title: "Asset Management & Lifecycle",
                        content: `
                           <div class="policy-section">
                                <div class="policy-section-title">Purpose</div>
                                <p>To track and manage all IT assets throughout their lifecycle, from procurement to disposal, ensuring compliance and security.</p>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Who Does What</div>
                                <ul>
                                    <li><strong>IT Asset Coordinator:</strong> Tags, registers, and maintains records of all devices and software licenses.</li>
                                    <li><strong>Managers:</strong> Ensure assets are used properly and returned when staff exit.</li>
                                    <li><strong>Finance:</strong> Reconciles inventory with depreciation and budgeting.</li>
                                </ul>
                            </div>
                             <div class="policy-section">
                                <div class="policy-section-title">TATs</div>
                                <ul>
                                    <li><strong>Asset Issuance (New Hire):</strong> Within 2 business days of start date.</li>
                                    <li><strong>Asset Return/Closeout (Departure):</strong> Within 3 business days of offboarding.</li>
                                    <li><strong>Lifecycle Audit:</strong> Annually.</li>
                                </ul>
                            </div>
                            <div class="policy-section">
                                <div class="policy-section-title">Process Flow</div>
                                <div class="flowchart">
                                    <div class="flowchart-io"><span>Asset Procured (Hardware or Software)</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Register in Asset Management System (ITMS)</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Deploy to User/System</span></div>
                                    <div class="flowchart-arrow"></div>
                                    <div class="flowchart-node"><span>Maintain/Update Through Lifecycle</span></div>
                                     <div class="flowchart-arrow"></div>
                                    <div class="flowchart-io"><span>Retire & Securely Dispose/Wipe Data</span></div>
                                </div>
                            </div>
                        `,
                        compliance: [{ id: "CM.L2-3.4.1", desc: "Establish and maintain baseline configurations and inventories of organizational systems.", title: "CMMC CM.L2-3.4.1" }]
                    }
                ]
            }
        };
        
        const complianceData = Object.values(sopData)
            .filter(cat => cat.policies)
            .flatMap(cat => cat.policies)
            .flatMap(p => p.compliance || [])
            .reduce((acc, curr) => {
                if(curr && curr.id) {
                   acc[curr.id] = curr;
                }
                return acc;
            }, {});


        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            const navLinks = document.querySelectorAll('.main-nav-link');
            const modal = document.getElementById('compliance-modal');
            const modalClose = document.getElementById('modal-close');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            let appState = {
                category: 'intro',
                policy: null,
            };

            function renderContent() {
                const data = sopData[appState.category];
                if (!data) {
                    mainContent.innerHTML = `<p class="p-8">Content not found.</p>`;
                    return;
                }

                if (appState.category === 'intro') {
                    mainContent.innerHTML = `
                        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
                            <h2 class="text-3xl font-bold tracking-tight text-slate-900 text-center">${data.title}</h2>
                            <div class="mt-8 text-center max-w-3xl mx-auto prose prose-custom">${data.overview}</div>
                        </div>
                    `;
                    renderSopChart();
                } else if (appState.category === 'glossary') {
                    let termsHtml = data.terms.sort((a,b) => a.term.localeCompare(b.term)).map(item => `
                        <div class="bg-white p-4 rounded-lg border border-slate-200">
                            <dt class="font-semibold text-slate-900">${item.term}</dt>
                            <dd class="mt-1 text-slate-600">${item.def}</dd>
                        </div>
                    `).join('');
                    mainContent.innerHTML = `
                        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
                             <h2 class="text-3xl font-bold tracking-tight text-slate-900">${data.title}</h2>
                             <div class="mt-4 prose prose-custom">${data.overview}</div>
                             <dl class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">${termsHtml}</dl>
                        </div>
                    `;
                } else {
                    const policyNavHtml = data.policies.map(p => `
                        <li><a href="#" class="sub-nav-link block px-4 py-2 text-sm rounded-md text-slate-600 hover:bg-slate-100" data-policy-id="${p.id}">${p.title}</a></li>
                    `).join('');

                    const activePolicy = data.policies.find(p => p.id === appState.policy) || data.policies[0];
                    
                    const complianceHtml = activePolicy.compliance ? activePolicy.compliance.map(c => `
                        <button class="compliance-tag inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800 hover:bg-teal-200" data-control-id="${c.id}">
                           ${c.title}
                        </button>
                    `).join('') : '';

                    mainContent.innerHTML = `
                        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
                            <div class="text-center">
                                 <h2 class="text-3xl font-bold tracking-tight text-slate-900">${data.title}</h2>
                                 <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">${data.overview}</p>
                            </div>
                            <div class="mt-12 lg:grid lg:grid-cols-12 lg:gap-8">
                                <aside class="lg:col-span-3">
                                    <nav class="space-y-1">
                                        <ul id="sub-nav">${policyNavHtml}</ul>
                                    </nav>
                                </aside>
                                <div id="policy-content" class="mt-8 lg:mt-0 lg:col-span-9">
                                    <article class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 md:p-8">
                                        <h2 class="text-2xl font-bold text-slate-800 mb-6">${activePolicy.title}</h2>
                                        <div class="prose prose-custom">${activePolicy.content}</div>
                                        ${complianceHtml ? `<div class="mt-8 border-t border-slate-200 pt-6">
                                            <h4 class="text-sm font-semibold text-slate-600 mb-3">Relevant Compliance Controls</h4>
                                            <div class="flex flex-wrap gap-2">${complianceHtml}</div>
                                        </div>` : ''}
                                    </article>
                                </div>
                            </div>
                        </div>
                    `;
                    updateSubNavActiveState();
                }
                updateMainNavActiveState();
            }

            function updateSubNavActiveState() {
                if (!sopData[appState.category].policies) return;
                const currentPolicyId = appState.policy || sopData[appState.category].policies[0].id;
                document.querySelectorAll('#sub-nav .sub-nav-link').forEach(link => {
                    link.classList.remove('active-nav');
                    if (link.dataset.policyId === currentPolicyId) {
                        link.classList.add('active-nav');
                    }
                });
            }

            function updateMainNavActiveState() {
                 navLinks.forEach(link => {
                    link.classList.remove('active-nav');
                    if(link.dataset.content === appState.category) {
                         link.classList.add('active-nav');
                    }
                 });
            }


            function renderSopChart() {
                const ctx = document.getElementById('sopChart').getContext('2d');
                const categories = Object.keys(sopData).filter(k => k.startsWith('cat'));
                const chartData = {
                    labels: categories.map(c => sopData[c].title),
                    datasets: [{
                        label: '# of Policies',
                        data: categories.map(c => sopData[c].policies.length),
                        backgroundColor: 'rgba(13, 148, 136, 0.6)', // teal-600
                        borderColor: 'rgba(15, 118, 110, 1)', // teal-700
                        borderWidth: 1,
                        hoverBackgroundColor: 'rgba(13, 148, 136, 0.8)'
                    }]
                };
                const sopChart = new Chart(ctx, {
                    type: 'bar',
                    data: chartData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    title: (context) => context[0].label
                                }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const index = elements[0].index;
                                const categoryId = categories[index];
                                appState.category = categoryId;
                                appState.policy = null;
                                renderContent();
                            }
                        }
                    }
                });
            }
            
            mainContent.addEventListener('click', (e) => {
                if (e.target.matches('.sub-nav-link')) {
                    e.preventDefault();
                    appState.policy = e.target.dataset.policyId;
                    renderContent();
                }
                const complianceTag = e.target.closest('.compliance-tag');
                if (complianceTag) {
                    const controlId = complianceTag.dataset.controlId;
                    const controlData = complianceData[controlId];
                    if (controlData) {
                        document.getElementById('modal-title').textContent = controlData.title;
                        document.getElementById('modal-body').innerHTML = `<p>${controlData.desc}</p>`;
                        modal.classList.remove('hidden');
                        modal.classList.add('flex');
                    }
                }
            });

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    appState.category = link.dataset.content;
                    appState.policy = null;
                    renderContent();
                    mobileMenu.classList.add('hidden');
                });
            });
            
            modalClose.addEventListener('click', () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            });

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            renderContent();
        });
    </script>
</body>
</html>
